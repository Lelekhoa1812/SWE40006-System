{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Message",
  "description": "Chat message between patient and doctor",
  "type": "object",
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique message identifier"
    },
    "subscriptionId": {
      "type": "string",
      "description": "ID of the subscription this message belongs to"
    },
    "fromUserId": {
      "type": "string",
      "description": "ID of the user who sent the message"
    },
    "toUserId": {
      "type": "string",
      "description": "ID of the user who should receive the message"
    },
    "content": {
      "type": "string",
      "maxLength": 2000,
      "description": "Message content"
    },
    "messageType": {
      "type": "string",
      "enum": ["text", "image", "file", "system"],
      "default": "text",
      "description": "Type of message"
    },
    "status": {
      "type": "string",
      "enum": ["sent", "delivered", "read"],
      "default": "sent",
      "description": "Message delivery status"
    },
    "metadata": {
      "type": "object",
      "properties": {
        "fileUrl": {
          "type": "string",
          "description": "URL for file attachments"
        },
        "fileName": {
          "type": "string",
          "description": "Original filename for attachments"
        },
        "fileSize": {
          "type": "number",
          "description": "File size in bytes"
        },
        "mimeType": {
          "type": "string",
          "description": "MIME type of the attachment"
        }
      },
      "additionalProperties": false
    },
    "createdAt": {
      "type": "string",
      "format": "date-time",
      "description": "Message creation timestamp"
    },
    "updatedAt": {
      "type": "string",
      "format": "date-time",
      "description": "Message last update timestamp"
    }
  },
  "required": [
    "subscriptionId",
    "fromUserId",
    "toUserId",
    "content",
    "messageType",
    "status"
  ],
  "additionalProperties": false
}
